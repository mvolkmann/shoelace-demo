<html class="sl-theme-light">
  <head>
    <title>Shoelace Demo</title>

    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.14.0/cdn/themes/light.css"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.14.0/cdn/themes/dark.css"
    />
    <!-- <link rel="stylesheet" href="/shoelace/themes/dark.css" /> -->
    <!-- <link rel="stylesheet" href="/shoelace/themes/light.css" /> -->
    <link rel="stylesheet" href="styles.css" />

    <script
      defer
      src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"
    ></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script
      src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.13.1/cdn/shoelace-autoloader.js"
      type="module"
    ></script>
    <!-- <script src="/shoelace/shoelace-autoloader.js" type="module"></script> -->

    <script src="reload.js"></script>

    <script defer>
      const state = {
        prefersDark: window.matchMedia('(prefers-color-scheme: dark)').matches
      };

      document.addEventListener('alpine:init', () => {
        Alpine.data('state', () => state);
      });

      window
        .matchMedia('(prefers-color-scheme: dark)')
        .addEventListener('change', event => {
          state.prefersDark = event.matches;
          updateMode();
        });

      function configureWatches(watch) {
        watch('prefersDark', updateMode);
      }

      function updateMode() {
        const el = document.documentElement;
        if (state.prefersDark) {
          el.classList.add('sl-theme-dark');
        } else {
          el.classList.remove('sl-theme-dark');
        }
      }

      updateMode();

      function toggleAlert() {
        const alert = document.querySelector('sl-alert');
        console.log('index.html: alert =', alert);
        if (alert.hasAttribute('open')) {
          alert.removeAttribute('open');
        } else {
          alert.setAttribute('open', '');
        }
      }
    </script>
  </head>
  <body x-data="state" x-init="configureWatches($watch)">
    <div class="row">
      <sl-button hx-get="/version" hx-target="#version">
        Get Bun Version
      </sl-button>
      <div id="version"></div>
    </div>
    <hr />
    <div>
      <sl-button @click="toggleAlert()"> Toggle Alert </sl-button>
      <sl-alert closable>
        <sl-icon slot="icon" name="info-circle"></sl-icon>
        This is a standard alert. You can customize its content and even the
        icon.
      </sl-alert>
    </div>
    <hr />
    <div>
      <sl-switch
        size="large"
        :checked="prefersDark"
        x-on:sl-change="prefersDark = $event.target.checked"
      >
        Dark Mode
      </sl-switch>
    </div>

    <!-- <form class="input-validation-required">
      <sl-input name="name" label="Name" required></sl-input>
      <br />
      <sl-select label="Favorite Animal" clearable required>
        <sl-option value="birds">Birds</sl-option>
        <sl-option value="cats">Cats</sl-option>
        <sl-option value="dogs">Dogs</sl-option>
        <sl-option value="other">Other</sl-option>
      </sl-select>
      <br />
      <sl-textarea name="comment" label="Comment" required></sl-textarea>
      <br />
      <sl-checkbox required>Check me before submitting</sl-checkbox>
      <br /><br />
      <sl-button type="submit" variant="primary">Submit</sl-button>
    </form> -->
  </body>
</html>
